---
slug: /tutorial/memory
title: 跨会话记忆
sidebar_label: 跨会话记忆
sidebar_position: 11
---

# 跨会话记忆

Memory 是 Omx 对 **Agentic Context Engineering (ACE)** 的实现 - 一个随时间改进响应的持久记忆系统。

## 工作原理

传统的 AI 助手每次会话都从头开始。它们不记得你的编码风格偏好、项目特定的模式、之前会话中犯的错误或成功的方法。

Memory 维护一组持久的 **Key Points** - 从你的对话中提取的简洁学习成果。这些关键点会在未来的对话中自动注入，帮助 Omx 更好地理解和适应你的工作方式。

## 反思与压缩

每次对话结束时（无论是自动压缩还是手动调用 `/compact`），Omx 会反思对话内容：

1. 将对话提炼为轨迹
2. 提取新的关键点
3. 评估现有关键点
4. 更新分数

### 关键点生命周期

**创建**：当压缩发生时，Omx 会分析对话并提取新的见解，这些成为新关键点，分数为 0。

**评估**：每次压缩时，现有关键点都会被评估：
- **有帮助** (+1)：关键点促成了好的结果
- **有害** (-3)：关键点导致了不好的结果
- **中性** (-2)：关键点不相关

未使用的关键点会随时间自然衰减。

**移除**：分数低于 -5 的关键点会被自动移除，确保 Memory 保持相关性。

## 启用 Memory

Memory 默认禁用。通过以下方式启用：

1. 启动时的配置菜单
2. `/status` 命令切换设置

启用后，你会在状态输出中看到 `Memory: √`。

## 学习内容

Memory 会捕获：
- 项目结构
- 编码偏好
- 常见模式
- 陷阱和注意事项
- 工具使用偏好

## 数据存储

Memory 按项目存储，路径为 `~/.omx/projects/<encoded-path>/memory.json`，其中 `<encoded-path>` 是当前工作目录的 base64url 编码：

```json
{
  "version": "1.0",
  "keyPoints": [
    {
      "name": "kpt_001",
      "text": "这个项目使用 TypeScript 严格模式...",
      "score": 3
    }
  ]
}
```

## 手动管理

你可以手动编辑 `memory.json` 来删除不需要的关键点、调整分数或直接添加已知信息。
